(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{6132:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},57626:(e,t,a)=>{Promise.resolve().then(a.bind(a,67718))},61362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},67718:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>A});var s=a(95155),r=a(12115),l=a(68385),i=a(18503),o=a(6613),c=a(61362),n=a(6132),d=a(71847);let x=(0,d.A)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),u=(0,d.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var m=a(22039),p=a(53127),h=a(94416);function f(e){let t=(0,h.M)(()=>(0,m.OQ)(e)),{isStatic:a}=(0,r.useContext)(p.Q);if(a){let[,a]=(0,r.useState)(e);(0,r.useEffect)(()=>t.on("change",a),[])}return t}var b=a(16706),g=a(73934),y=a(86553);function j(e,t){let a=f(t()),s=()=>a.set(t());return s(),(0,y.E)(()=>{let t=()=>g.Gt.preRender(s,!1,!0),a=e.map(e=>e.on("change",t));return()=>{a.forEach(e=>e()),(0,g.WG)(s)}}),a}function w(e,t,a,s){if("function"==typeof e){m.bt.current=[],e();let t=j(m.bt.current,e);return m.bt.current=void 0,t}if(void 0!==a&&!Array.isArray(a)&&"function"!=typeof t){var r=e,l=t,i=a,o=s;let c=(0,h.M)(()=>Object.keys(i)),n=(0,h.M)(()=>({}));for(let e of c)n[e]=w(r,l,i[e],o);return n}let c="function"==typeof t?t:function(...e){let t=!Array.isArray(e[0]),a=t?0:-1,s=e[0+a],r=e[1+a],l=e[2+a],i=e[3+a],o=(0,b.G)(r,l,i);return t?o(s):o}(t,a,s),n=Array.isArray(e)?N(e,c):N([e],e=>{let[t]=e;return c(t)}),d=Array.isArray(e)?void 0:e.accelerate;return d&&!d.isTransformed&&"function"!=typeof t&&Array.isArray(a)&&(null==s?void 0:s.clamp)!==!1&&(n.accelerate={...d,times:t,keyframes:a,isTransformed:!0,...(null==s?void 0:s.ease)?{ease:s.ease}:{}}),n}function N(e,t){let a=(0,h.M)(()=>[]);return j(e,()=>{a.length=0;let s=e.length;for(let t=0;t<s;t++)a[t]=e[t].get();return t(a)})}var v=a(67503),_=a(3941),k=a(20063);function A(){let[e,t]=(0,r.useState)(null),[a,d]=(0,r.useState)([]),[m,p]=(0,r.useState)([]),[h,b]=(0,r.useState)(null),[g,y]=(0,r.useState)(""),[j,N]=(0,r.useState)(""),[A,S]=(0,r.useState)(""),[C,D]=(0,r.useState)(!0),[E,M]=(0,r.useState)(!1),[P,O]=(0,r.useState)({text:"",type:""}),[T,z]=(0,r.useState)(null),[q,G]=(0,r.useState)(null),I=f(0),B=w(I,[-200,0,200],["rgba(220, 38, 38, 0.4)","rgba(2, 6, 23, 1)","rgba(5, 150, 105, 0.4)"]),F=w(I,[-200,200],[-10,10]),H=w(I,[0,100],[0,1]),R=w(I,[0,-100],[0,1]),L=w(I,[-50,0,50],[0,1,0]);(0,k.useRouter)(),(0,r.useEffect)(()=>{Q()},[]);let Q=async()=>{try{D(!0);let{data:{session:e}}=await _.N.auth.getSession();z(e);let{data:a}=await _.N.from("partidos").select("*").eq("estado","programado").order("fecha",{ascending:!0}).limit(1).single();a&&t(a);let{data:s}=await _.N.from("jugadores").select("id, nombre").order("nombre",{ascending:!0});s&&d(s);let r=await fetch("/api/porra/leaderboard"),l=await r.json();if(l.success&&p(l.ranking),e&&a){let{data:t}=await _.N.from("predicciones").select("*").eq("usuario_id",e.user.id).eq("partido_id",a.id).single();t&&(b(t),y(t.goles_local),N(t.goles_visitante),S(t.primer_goleador_id||""))}}catch(e){console.error(e)}finally{D(!1)}},V=async t=>{if(t.preventDefault(),!T)return void O({text:"Debes iniciar sesi\xf3n para participar.",type:"error"});if(e){if(""===g||""===j)return void O({text:"Por favor, introduce tu predicci\xf3n de goles.",type:"error"});try{M(!0),O({text:"",type:""});let t=await fetch("/api/porra",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(T.access_token)},body:JSON.stringify({partido_id:e.id,goles_local:Number(g),goles_visitante:Number(j),primer_goleador_id:A||void 0})}),a=await t.json();a.success?(O({text:"\xa1Predicci\xf3n guardada correctamente!",type:"success"}),b({id:(null==h?void 0:h.id)||"new",partido_id:e.id,goles_local:Number(g),goles_visitante:Number(j),primer_goleador_id:A,puntos:(null==h?void 0:h.puntos)||0})):O({text:a.error||"Error al guardar.",type:"error"})}catch(e){O({text:"Error de conexi\xf3n",type:"error"})}finally{M(!1)}}};return(0,s.jsxs)(v.P.main,{style:{backgroundColor:B},className:"min-h-screen text-slate-100 flex flex-col font-sans transition-colors duration-200",children:[(0,s.jsx)(l.Header,{}),(0,s.jsxs)("div",{className:"flex-1 max-w-7xl mx-auto w-full px-4 py-24 lg:px-8 space-y-12",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("h1",{className:"text-5xl md:text-7xl font-black italic uppercase text-white tracking-tighter drop-shadow-[0_0_15px_rgba(236,72,153,0.5)] flex items-center justify-center gap-3 font-mono",children:[(0,s.jsx)(o.A,{className:"h-12 w-12 text-fuchsia-500"}),"El Or\xe1culo del Vestuario"]}),(0,s.jsx)("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-medium",children:"\xbfCu\xe1ntos goles nos van a caer hoy? Desliza, elige el resultado y demuestra tu nivel de Hooligan."})]}),C?(0,s.jsx)("div",{className:"flex justify-center p-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fuchsia-500"})}):(0,s.jsxs)("div",{className:"flex flex-col gap-12 items-center max-w-2xl mx-auto",children:[(0,s.jsx)("div",{className:"w-full",children:e?(0,s.jsxs)("form",{onSubmit:V,className:"space-y-8 flex flex-col items-center",children:[(0,s.jsx)("div",{className:"relative w-full h-64 md:h-80 flex items-center justify-center",children:(0,s.jsxs)(v.P.div,{drag:"x",dragConstraints:{left:0,right:0},style:{x:I,rotate:F},dragSnapToOrigin:!0,dragElastic:.2,onDragEnd:(e,t)=>{t.offset.x>100?(G("right"),y(e=>Number(e||0)+1),""===j&&N(0)):t.offset.x<-100&&(G("left"),N(e=>Number(e||0)+1),""===g&&y(0))},whileTap:{cursor:"grabbing"},className:"absolute w-full h-full bg-slate-900 border-2 border-slate-800 rounded-3xl shadow-2xl flex flex-col items-center justify-center p-6 cursor-grab",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full opacity-90",children:[(0,s.jsx)("div",{className:"text-center flex-1",children:(0,s.jsx)("span",{className:"font-black text-2xl block text-white uppercase tracking-wider font-mono drop-shadow-[0_0_8px_rgba(5,150,105,0.8)]",children:"Impersed FC"})}),(0,s.jsx)("span",{className:"font-black text-3xl italic text-slate-500 px-4",children:"VS"}),(0,s.jsx)("div",{className:"text-center flex-1",children:(0,s.jsx)("span",{className:"font-black text-2xl block text-white uppercase tracking-wider font-mono drop-shadow-[0_0_8px_rgba(220,38,38,0.8)]",children:e.rival})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center min-h-[4rem] flex flex-col items-center justify-center",children:[(0,s.jsx)(v.P.div,{style:{opacity:H},className:"absolute text-emerald-400 font-extrabold text-3xl uppercase italic tracking-widest drop-shadow-[0_0_10px_rgba(5,150,105,1)]",children:"\xa1Fiel a la causa!"}),(0,s.jsx)(v.P.div,{style:{opacity:R},className:"absolute text-red-500 font-extrabold text-3xl uppercase italic tracking-widest drop-shadow-[0_0_10px_rgba(220,38,38,1)]",children:"\xa1Traidor!"}),(0,s.jsx)(v.P.div,{style:{opacity:L},className:"text-slate-400 font-medium text-sm flex items-center gap-2",children:(0,s.jsx)("span",{className:"animate-pulse",children:"\uD83D\uDC48 Desliza para dictar sentencia \uD83D\uDC49"})})]})]})}),(0,s.jsxs)("div",{className:"w-full bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl space-y-6",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h3",{className:"text-xl font-bold uppercase italic text-fuchsia-400 mb-6 drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"\xbfCu\xe1l ser\xe1 el resultado exacto?"})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center bg-slate-950 px-4 py-2 rounded-2xl border border-slate-800",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-500 mb-2 uppercase",children:"Impersed"}),(0,s.jsx)("button",{type:"button",onClick:()=>y(e=>Math.max(0,Number(e)+1)),className:"text-emerald-500 hover:text-emerald-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▲"}),(0,s.jsx)("div",{className:"text-5xl font-black font-mono text-white py-2 w-16 text-center",children:""===g?"0":g}),(0,s.jsx)("button",{type:"button",onClick:()=>y(e=>Math.max(0,Number(e)-1)),className:"text-emerald-500 hover:text-emerald-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▼"})]}),(0,s.jsx)("span",{className:"text-3xl font-black text-slate-600",children:"-"}),(0,s.jsxs)("div",{className:"flex flex-col items-center bg-slate-950 px-4 py-2 rounded-2xl border border-slate-800",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-500 mb-2 uppercase",children:"Rival"}),(0,s.jsx)("button",{type:"button",onClick:()=>N(e=>Math.max(0,Number(e)+1)),className:"text-red-500 hover:text-red-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▲"}),(0,s.jsx)("div",{className:"text-5xl font-black font-mono text-white py-2 w-16 text-center",children:""===j?"0":j}),(0,s.jsx)("button",{type:"button",onClick:()=>N(e=>Math.max(0,Number(e)-1)),className:"text-red-500 hover:text-red-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▼"})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-800/50",children:[(0,s.jsx)("label",{className:"block text-center text-sm font-bold uppercase italic text-fuchsia-400 mb-3",children:"Primer Goleador (Opcional)"}),(0,s.jsxs)("select",{value:A,onChange:e=>S(e.target.value),className:"w-full p-4 rounded-xl border border-slate-700 bg-slate-950 text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500 transition-shadow text-center font-bold",children:[(0,s.jsx)("option",{value:"",children:"\uD83D\uDD2E Selecciona a tu protegido"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]}),P.text&&(0,s.jsxs)("div",{className:"w-full p-4 rounded-xl flex items-center justify-center gap-2 ".concat("success"===P.type?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/50":"bg-red-500/20 text-red-400 border border-red-500/50"),children:["success"===P.type?(0,s.jsx)(c.A,{className:"w-5 h-5"}):(0,s.jsx)(n.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-bold text-sm tracking-wide",children:P.text})]}),T?(0,s.jsx)("button",{type:"submit",disabled:E||""===g&&""===j,className:"w-full bg-fuchsia-600 text-white font-black uppercase italic tracking-widest text-lg py-5 rounded-2xl hover:bg-fuchsia-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-[0_0_20px_rgba(236,72,153,0.4)] hover:shadow-[0_0_30px_rgba(236,72,153,0.6)] relative overflow-hidden",children:E?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Invocando a los astros..."})]}):h?"Modificar Profec\xeda":"Sellar Predicci\xf3n"}):(0,s.jsx)("button",{type:"button",onClick:()=>window.scrollTo(0,0),className:"w-full bg-slate-800 text-slate-300 font-black uppercase tracking-widest py-5 rounded-2xl hover:bg-slate-700 transition-colors border-2 border-slate-700",children:"Inicia Sesi\xf3n para Sellar Tu Destino"})]}):(0,s.jsxs)("div",{className:"text-center p-12 bg-slate-900 rounded-3xl border border-slate-800",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,s.jsxs)("p",{className:"text-slate-400 font-bold uppercase tracking-wider",children:["La bola de cristal est\xe1 nublada.",(0,s.jsx)("br",{}),"No hay partidos pr\xf3ximos."]})]})}),(0,s.jsxs)("div",{className:"w-full mt-12 bg-slate-900 border border-slate-800 rounded-3xl p-6 md:p-10 shadow-2xl relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-fuchsia-600/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3"}),(0,s.jsxs)("h2",{className:"text-3xl font-black italic uppercase text-white mb-8 flex items-center justify-center gap-3 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] tracking-tight",children:[(0,s.jsx)(u,{className:"w-8 h-8 text-yellow-400"}),"Nivel de Hooligan"]}),(0,s.jsx)("div",{className:"relative z-10",children:m.length>0?(0,s.jsx)("ul",{className:"space-y-6",children:m.map((e,t)=>{let a="Pitiso de banquillo",r="text-slate-500",l="bg-slate-600",i=e.puntos,o=Math.min(i/30*100,100);return i>=25?(a="Nostradamus",r="text-fuchsia-400 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)]",l="bg-fuchsia-500 shadow-[0_0_10px_rgba(236,72,153,0.5)]"):i>=15?(a="Mourinho de Barrio",r="text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.8)]",l="bg-yellow-400 shadow-[0_0_10px_rgba(250,204,21,0.5)]"):i>=8?(a="Experto de Bar",r="text-emerald-400 drop-shadow-[0_0_5px_rgba(52,211,153,0.8)]",l="bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"):i>0&&(a="Utillero",r="text-sky-400",l="bg-sky-400"),(0,s.jsxs)("li",{className:"bg-slate-950/50 p-4 rounded-2xl border border-slate-800/50 transform transition-transform hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"w-8 h-8 rounded-full flex items-center justify-center font-black text-sm bg-slate-800 text-slate-300 border ".concat(0===t?"border-yellow-400 text-yellow-400":"border-slate-700"),children:t+1}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-white block",children:e.nombre}),(0,s.jsxs)("span",{className:"text-xs font-black italic tracking-widest uppercase ".concat(r),children:["Lvl. ",Math.floor(i/5)+1," - ",a]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-2xl font-black text-white font-mono",children:e.puntos}),(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold text-slate-500 block -mt-1 tracking-widest",children:"Cred"})]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-900 rounded-full h-2.5 overflow-hidden border border-slate-800",children:(0,s.jsx)(v.P.div,{initial:{width:0},animate:{width:"".concat(o,"%")},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full ".concat(l)})})]},e.id)})}):(0,s.jsxs)("div",{className:"text-center p-12",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-slate-700 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-slate-500 font-bold uppercase tracking-wider",children:"El sal\xf3n de la fama est\xe1 vac\xedo."})]})})]})]})]}),(0,s.jsx)(i.Footer,{})]})}}},e=>{e.O(0,[174,867,179,963,441,255,358],()=>e(e.s=57626)),_N_E=e.O()}]);