(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[933],{6132:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},57626:(e,t,a)=>{Promise.resolve().then(a.bind(a,92089))},61362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},92089:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var s=a(95155),l=a(12115),r=a(68385),i=a(18503),c=a(6613),o=a(61362),n=a(6132),d=a(71847);let x=(0,d.A)("Skull",[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]]),u=(0,d.A)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);var m=a(53350),p=a(99770),h=a(67503),b=a(3941),f=a(20063);function g(){let[e,t]=(0,l.useState)(null),[a,d]=(0,l.useState)([]),[g,j]=(0,l.useState)([]),[w,N]=(0,l.useState)(null),[y,v]=(0,l.useState)(""),[_,k]=(0,l.useState)(""),[S,C]=(0,l.useState)(""),[D,A]=(0,l.useState)(!0),[P,E]=(0,l.useState)(!1),[M,z]=(0,l.useState)({text:"",type:""}),[O,T]=(0,l.useState)(null),[q,G]=(0,l.useState)(null),I=(0,m.d)(0),B=(0,p.G)(I,[-200,0,200],["rgba(220, 38, 38, 0.4)","rgba(2, 6, 23, 1)","rgba(5, 150, 105, 0.4)"]),F=(0,p.G)(I,[-200,200],[-10,10]),H=(0,p.G)(I,[0,100],[0,1]),L=(0,p.G)(I,[0,-100],[0,1]),R=(0,p.G)(I,[-50,0,50],[0,1,0]);(0,f.useRouter)(),(0,l.useEffect)(()=>{V()},[]);let V=async()=>{try{A(!0);let{data:{session:e}}=await b.N.auth.getSession();T(e);let{data:a}=await b.N.from("partidos").select("*").eq("estado","programado").order("fecha",{ascending:!0}).limit(1).single();a&&t(a);let{data:s}=await b.N.from("jugadores").select("id, nombre").order("nombre",{ascending:!0});s&&d(s);let l=await fetch("/api/porra/leaderboard"),r=await l.json();if(r.success&&j(r.ranking),e&&a){let{data:t}=await b.N.from("predicciones").select("*").eq("usuario_id",e.user.id).eq("partido_id",a.id).single();t&&(N(t),v(t.goles_local),k(t.goles_visitante),C(t.primer_goleador_id||""))}}catch(e){console.error(e)}finally{A(!1)}},J=async t=>{if(t.preventDefault(),!O)return void z({text:"Debes iniciar sesi\xf3n para participar.",type:"error"});if(e){if(""===y||""===_)return void z({text:"Por favor, introduce tu predicci\xf3n de goles.",type:"error"});try{E(!0),z({text:"",type:""});let t=await fetch("/api/porra",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(O.access_token)},body:JSON.stringify({partido_id:e.id,goles_local:Number(y),goles_visitante:Number(_),primer_goleador_id:S||void 0})}),a=await t.json();a.success?(z({text:"\xa1Predicci\xf3n guardada correctamente!",type:"success"}),N({id:(null==w?void 0:w.id)||"new",partido_id:e.id,goles_local:Number(y),goles_visitante:Number(_),primer_goleador_id:S,puntos:(null==w?void 0:w.puntos)||0})):z({text:a.error||"Error al guardar.",type:"error"})}catch(e){z({text:"Error de conexi\xf3n",type:"error"})}finally{E(!1)}}};return(0,s.jsxs)(h.P.main,{style:{backgroundColor:B},className:"min-h-screen text-slate-100 flex flex-col font-sans transition-colors duration-200",children:[(0,s.jsx)(r.Header,{}),(0,s.jsxs)("div",{className:"flex-1 max-w-7xl mx-auto w-full px-4 py-24 lg:px-8 space-y-12",children:[(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("h1",{className:"text-5xl md:text-7xl font-black italic uppercase text-white tracking-tighter drop-shadow-[0_0_15px_rgba(236,72,153,0.5)] flex items-center justify-center gap-3 font-mono",children:[(0,s.jsx)(c.A,{className:"h-12 w-12 text-fuchsia-500"}),"El Or\xe1culo del Vestuario"]}),(0,s.jsx)("p",{className:"text-xl text-slate-400 max-w-2xl mx-auto font-medium",children:"\xbfCu\xe1ntos goles nos van a caer hoy? Desliza, elige el resultado y demuestra tu nivel de Hooligan."})]}),D?(0,s.jsx)("div",{className:"flex justify-center p-12",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-fuchsia-500"})}):(0,s.jsxs)("div",{className:"flex flex-col gap-12 items-center max-w-2xl mx-auto",children:[(0,s.jsx)("div",{className:"w-full",children:e?(0,s.jsxs)("form",{onSubmit:J,className:"space-y-8 flex flex-col items-center",children:[(0,s.jsx)("div",{className:"relative w-full h-64 md:h-80 flex items-center justify-center",children:(0,s.jsxs)(h.P.div,{drag:"x",dragConstraints:{left:0,right:0},style:{x:I,rotate:F},dragSnapToOrigin:!0,dragElastic:.2,onDragEnd:(e,t)=>{t.offset.x>100?(G("right"),v(e=>Number(e||0)+1),""===_&&k(0)):t.offset.x<-100&&(G("left"),k(e=>Number(e||0)+1),""===y&&v(0))},whileTap:{cursor:"grabbing"},className:"absolute w-full h-full bg-slate-900 border-2 border-slate-800 rounded-3xl shadow-2xl flex flex-col items-center justify-center p-6 cursor-grab",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full opacity-90",children:[(0,s.jsx)("div",{className:"text-center flex-1",children:(0,s.jsx)("span",{className:"font-black text-2xl block text-white uppercase tracking-wider font-mono drop-shadow-[0_0_8px_rgba(5,150,105,0.8)]",children:"Impersed FC"})}),(0,s.jsx)("span",{className:"font-black text-3xl italic text-slate-500 px-4",children:"VS"}),(0,s.jsx)("div",{className:"text-center flex-1",children:(0,s.jsx)("span",{className:"font-black text-2xl block text-white uppercase tracking-wider font-mono drop-shadow-[0_0_8px_rgba(220,38,38,0.8)]",children:e.rival})})]}),(0,s.jsxs)("div",{className:"mt-8 text-center min-h-[4rem] flex flex-col items-center justify-center",children:[(0,s.jsx)(h.P.div,{style:{opacity:H},className:"absolute text-emerald-400 font-extrabold text-3xl uppercase italic tracking-widest drop-shadow-[0_0_10px_rgba(5,150,105,1)]",children:"\xa1Fiel a la causa!"}),(0,s.jsx)(h.P.div,{style:{opacity:L},className:"absolute text-red-500 font-extrabold text-3xl uppercase italic tracking-widest drop-shadow-[0_0_10px_rgba(220,38,38,1)]",children:"\xa1Traidor!"}),(0,s.jsx)(h.P.div,{style:{opacity:R},className:"text-slate-400 font-medium text-sm flex items-center gap-2",children:(0,s.jsx)("span",{className:"animate-pulse",children:"\uD83D\uDC48 Desliza para dictar sentencia \uD83D\uDC49"})})]})]})}),(0,s.jsxs)("div",{className:"w-full bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl space-y-6",children:[(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h3",{className:"text-xl font-bold uppercase italic text-fuchsia-400 mb-6 drop-shadow-[0_0_5px_rgba(236,72,153,0.5)]",children:"\xbfCu\xe1l ser\xe1 el resultado exacto?"})}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center bg-slate-950 px-4 py-2 rounded-2xl border border-slate-800",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-500 mb-2 uppercase",children:"Impersed"}),(0,s.jsx)("button",{type:"button",onClick:()=>v(e=>Math.max(0,Number(e)+1)),className:"text-emerald-500 hover:text-emerald-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▲"}),(0,s.jsx)("div",{className:"text-5xl font-black font-mono text-white py-2 w-16 text-center",children:""===y?"0":y}),(0,s.jsx)("button",{type:"button",onClick:()=>v(e=>Math.max(0,Number(e)-1)),className:"text-emerald-500 hover:text-emerald-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▼"})]}),(0,s.jsx)("span",{className:"text-3xl font-black text-slate-600",children:"-"}),(0,s.jsxs)("div",{className:"flex flex-col items-center bg-slate-950 px-4 py-2 rounded-2xl border border-slate-800",children:[(0,s.jsx)("span",{className:"text-xs font-bold text-slate-500 mb-2 uppercase",children:"Rival"}),(0,s.jsx)("button",{type:"button",onClick:()=>k(e=>Math.max(0,Number(e)+1)),className:"text-red-500 hover:text-red-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▲"}),(0,s.jsx)("div",{className:"text-5xl font-black font-mono text-white py-2 w-16 text-center",children:""===_?"0":_}),(0,s.jsx)("button",{type:"button",onClick:()=>k(e=>Math.max(0,Number(e)-1)),className:"text-red-500 hover:text-red-400 font-black text-xl p-2 cursor-pointer transition-transform active:scale-95",children:"▼"})]})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-800/50",children:[(0,s.jsx)("label",{className:"block text-center text-sm font-bold uppercase italic text-fuchsia-400 mb-3",children:"Primer Goleador (Opcional)"}),(0,s.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"w-full p-4 rounded-xl border border-slate-700 bg-slate-950 text-white focus:outline-none focus:ring-2 focus:ring-fuchsia-500 transition-shadow text-center font-bold",children:[(0,s.jsx)("option",{value:"",children:"\uD83D\uDD2E Selecciona a tu protegido"}),a.map(e=>(0,s.jsx)("option",{value:e.id,children:e.nombre},e.id))]})]})]}),M.text&&(0,s.jsxs)("div",{className:"w-full p-4 rounded-xl flex items-center justify-center gap-2 ".concat("success"===M.type?"bg-emerald-500/20 text-emerald-400 border border-emerald-500/50":"bg-red-500/20 text-red-400 border border-red-500/50"),children:["success"===M.type?(0,s.jsx)(o.A,{className:"w-5 h-5"}):(0,s.jsx)(n.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{className:"font-bold text-sm tracking-wide",children:M.text})]}),O?(0,s.jsx)("button",{type:"submit",disabled:P||""===y&&""===_,className:"w-full bg-fuchsia-600 text-white font-black uppercase italic tracking-widest text-lg py-5 rounded-2xl hover:bg-fuchsia-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-[0_0_20px_rgba(236,72,153,0.4)] hover:shadow-[0_0_30px_rgba(236,72,153,0.6)] relative overflow-hidden",children:P?(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Invocando a los astros..."})]}):w?"Modificar Profec\xeda":"Sellar Predicci\xf3n"}):(0,s.jsx)("button",{type:"button",onClick:()=>window.scrollTo(0,0),className:"w-full bg-slate-800 text-slate-300 font-black uppercase tracking-widest py-5 rounded-2xl hover:bg-slate-700 transition-colors border-2 border-slate-700",children:"Inicia Sesi\xf3n para Sellar Tu Destino"})]}):(0,s.jsxs)("div",{className:"text-center p-12 bg-slate-900 rounded-3xl border border-slate-800",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),(0,s.jsxs)("p",{className:"text-slate-400 font-bold uppercase tracking-wider",children:["La bola de cristal est\xe1 nublada.",(0,s.jsx)("br",{}),"No hay partidos pr\xf3ximos."]})]})}),(0,s.jsxs)("div",{className:"w-full mt-12 bg-slate-900 border border-slate-800 rounded-3xl p-6 md:p-10 shadow-2xl relative overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute top-0 right-0 w-64 h-64 bg-fuchsia-600/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3"}),(0,s.jsxs)("h2",{className:"text-3xl font-black italic uppercase text-white mb-8 flex items-center justify-center gap-3 drop-shadow-[0_0_8px_rgba(255,255,255,0.3)] tracking-tight",children:[(0,s.jsx)(u,{className:"w-8 h-8 text-yellow-400"}),"Nivel de Hooligan"]}),(0,s.jsx)("div",{className:"relative z-10",children:g.length>0?(0,s.jsx)("ul",{className:"space-y-6",children:g.map((e,t)=>{let a="Pitiso de banquillo",l="text-slate-500",r="bg-slate-600",i=e.puntos,c=Math.min(i/30*100,100);return i>=25?(a="Nostradamus",l="text-fuchsia-400 drop-shadow-[0_0_5px_rgba(236,72,153,0.8)]",r="bg-fuchsia-500 shadow-[0_0_10px_rgba(236,72,153,0.5)]"):i>=15?(a="Mourinho de Barrio",l="text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.8)]",r="bg-yellow-400 shadow-[0_0_10px_rgba(250,204,21,0.5)]"):i>=8?(a="Experto de Bar",l="text-emerald-400 drop-shadow-[0_0_5px_rgba(52,211,153,0.8)]",r="bg-emerald-400 shadow-[0_0_10px_rgba(52,211,153,0.5)]"):i>0&&(a="Utillero",l="text-sky-400",r="bg-sky-400"),(0,s.jsxs)("li",{className:"bg-slate-950/50 p-4 rounded-2xl border border-slate-800/50 transform transition-transform hover:scale-[1.02]",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"w-8 h-8 rounded-full flex items-center justify-center font-black text-sm bg-slate-800 text-slate-300 border ".concat(0===t?"border-yellow-400 text-yellow-400":"border-slate-700"),children:t+1}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-white block",children:e.nombre}),(0,s.jsxs)("span",{className:"text-xs font-black italic tracking-widest uppercase ".concat(l),children:["Lvl. ",Math.floor(i/5)+1," - ",a]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-2xl font-black text-white font-mono",children:e.puntos}),(0,s.jsx)("span",{className:"text-[10px] uppercase font-bold text-slate-500 block -mt-1 tracking-widest",children:"Cred"})]})]}),(0,s.jsx)("div",{className:"w-full bg-slate-900 rounded-full h-2.5 overflow-hidden border border-slate-800",children:(0,s.jsx)(h.P.div,{initial:{width:0},animate:{width:"".concat(c,"%")},transition:{duration:1,ease:"easeOut"},className:"h-full rounded-full ".concat(r)})})]},e.id)})}):(0,s.jsxs)("div",{className:"text-center p-12",children:[(0,s.jsx)(x,{className:"w-12 h-12 text-slate-700 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-slate-500 font-bold uppercase tracking-wider",children:"El sal\xf3n de la fama est\xe1 vac\xedo."})]})})]})]})]}),(0,s.jsx)(i.Footer,{})]})}}},e=>{e.O(0,[174,867,160,963,441,255,358],()=>e(e.s=57626)),_N_E=e.O()}]);