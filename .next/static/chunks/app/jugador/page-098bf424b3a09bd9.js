(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{3941:(e,r,t)=>{"use strict";t.d(r,{N:()=>a});let a=(0,t(92373).UU)("https://aknyrfoxlpphebkfomwx.supabase.co","sb_publishable_Z36O_vV2RpFxkajpCPpU7w_D9ve-o3k")},8353:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var a=t(95155),s=t(12115),l=t(20063),d=t(3941),o=t(35299),i=t(96044),n=t(61362);let c=(0,t(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function u(){let e=(0,l.useRouter)(),[r,t]=(0,s.useState)(null),[u,m]=(0,s.useState)(null),[x,h]=(0,s.useState)(null),[p,f]=(0,s.useState)(null),[g,b]=(0,s.useState)(!0);async function y(){try{let{data:{session:r}}=await d.N.auth.getSession();if(!r)return void e.push("/");let{data:a}=await d.N.from("usuarios").select("rol, jugador_id").eq("id",r.user.id).single();if(!a||"jugador"!==a.rol)return void e.push("/");t(r.user),m(a.jugador_id);let{data:s}=await d.N.from("partidos").select("*").eq("estado","pendiente").order("fecha",{ascending:!0}).limit(1);if(s&&s.length>0){let e=s[0];if(h(e),a.jugador_id){let{data:r}=await d.N.from("convocatorias").select("asiste").eq("partido_id",e.id).eq("jugador_id",a.jugador_id).single();r&&f(r.asiste)}}}catch(e){console.error(e)}finally{b(!1)}}(0,s.useEffect)(()=>{y()},[]);let j=async e=>{if(u&&x){f(e);try{let{error:r}=await d.N.from("convocatorias").upsert({partido_id:x.id,jugador_id:u,asiste:e},{onConflict:"partido_id, jugador_id"});if(r)throw r}catch(e){console.error("Error setting RSVP:",e),alert("Error al guardar asistencia. Intenta de nuevo."),f(null)}}};return g?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"animate-spin text-primary h-8 w-8"})}):(0,a.jsx)("div",{className:"min-h-screen bg-background text-foreground pt-24 pb-12 px-4",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"bg-card/50 backdrop-blur border border-border rounded-3xl p-8 shadow-sm",children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold mb-2",children:"Portal del Jugador"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Bienvenido a tu panel personal de la plantilla."})]}),x?(0,a.jsxs)("div",{className:"bg-card border border-border rounded-3xl overflow-hidden shadow-lg",children:[(0,a.jsxs)("div",{className:"bg-primary/10 border-b border-border p-6 flex items-center justify-between",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2",children:[(0,a.jsx)(i.A,{className:"h-6 w-6 text-primary"}),"Pr\xf3xima Convocatoria"]}),(0,a.jsx)("span",{className:"bg-primary text-primary-foreground text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider",children:"Pendiente"})]}),(0,a.jsxs)("div",{className:"p-8 text-center space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mb-2",children:"Jornada vs"}),(0,a.jsx)("p",{className:"text-4xl font-black",children:x.rival}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-4 text-lg",children:["\uD83D\uDCC5 ",new Date(x.fecha).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,a.jsxs)("div",{className:"pt-8 border-t border-border mt-8",children:[(0,a.jsx)("h3",{className:"text-lg font-bold mb-6",children:"\xbfVas a asistir al partido?"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[(0,a.jsxs)("button",{onClick:()=>j(!0),className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 rounded-2xl font-bold text-lg transition-all ".concat(!0===p?"bg-emerald-500 text-white shadow-lg shadow-emerald-500/20 ring-2 ring-emerald-500 ring-offset-2 ring-offset-background":"bg-secondary hover:bg-emerald-500/10 hover:text-emerald-500"),children:[(0,a.jsx)(n.A,{className:"h-6 w-6"}),"Asistir\xe9"]}),(0,a.jsxs)("button",{onClick:()=>j(!1),className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 rounded-2xl font-bold text-lg transition-all ".concat(!1===p?"bg-red-500 text-white shadow-lg shadow-red-500/20 ring-2 ring-red-500 ring-offset-2 ring-offset-background":"bg-secondary hover:bg-red-500/10 hover:text-red-500"),children:[(0,a.jsx)(c,{className:"h-6 w-6"}),"No ir\xe9"]})]})]})]})]}):(0,a.jsxs)("div",{className:"bg-card border border-border border-dashed rounded-3xl p-12 text-center",children:[(0,a.jsx)("span",{className:"text-4xl opacity-50 mb-4 block",children:"\uD83C\uDFDDï¸"}),(0,a.jsx)("h3",{className:"text-xl font-bold text-foreground",children:"No hay pr\xf3ximos partidos"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-2",children:"El calendario est\xe1 libre. Disfruta del descanso."})]})]})})}},35299:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},61362:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71847:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(12115);let s=function(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return r.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,r)=>{let{color:t="currentColor",size:d=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:n="",children:c,iconNode:u,...m}=e;return(0,a.createElement)("svg",{ref:r,...l,width:d,height:d,stroke:t,strokeWidth:i?24*Number(o)/Number(d):o,className:s("lucide",n),...m},[...u.map(e=>{let[r,t]=e;return(0,a.createElement)(r,t)}),...Array.isArray(c)?c:[c]])}),o=(e,r)=>{let t=(0,a.forwardRef)((t,l)=>{let{className:o,...i}=t;return(0,a.createElement)(d,{ref:l,iconNode:r,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),o),...i})});return t.displayName="".concat(e),t}},96044:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(71847).A)("CalendarHeart",[["path",{d:"M3 10h18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7",key:"136lmk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z",key:"1t7hil"}]])},99848:(e,r,t)=>{Promise.resolve().then(t.bind(t,8353))}},e=>{e.O(0,[190,441,255,358],()=>e(e.s=99848)),_N_E=e.O()}]);