(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[747],{3941:(e,t,r)=>{"use strict";r.d(t,{N:()=>a});let a=(0,r(35497).UU)("https://aknyrfoxlpphebkfomwx.supabase.co","sb_publishable_Z36O_vV2RpFxkajpCPpU7w_D9ve-o3k")},5379:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,N:()=>c});var a=r(12115),s=(e,t,r,a,s,o,l,n)=>{let d=document.documentElement,i=["light","dark"];function c(t){var r;(Array.isArray(e)?e:[e]).forEach(e=>{let r="class"===e,a=r&&o?s.map(e=>o[e]||e):s;r?(d.classList.remove(...a),d.classList.add(o&&o[t]?o[t]:t)):d.setAttribute(e,t)}),r=t,n&&i.includes(r)&&(d.style.colorScheme=r)}if(a)c(a);else try{let e=localStorage.getItem(t)||r,a=l&&"system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;c(a)}catch(e){}},o=["light","dark"],l="(prefers-color-scheme: dark)",n=a.createContext(void 0),d={setTheme:e=>{},themes:[]},i=()=>{var e;return null!=(e=a.useContext(n))?e:d},c=e=>a.useContext(n)?a.createElement(a.Fragment,null,e.children):a.createElement(u,{...e}),m=["light","dark"],u=e=>{let{forcedTheme:t,disableTransitionOnChange:r=!1,enableSystem:s=!0,enableColorScheme:d=!0,storageKey:i="theme",themes:c=m,defaultTheme:u=s?"system":"light",attribute:f="data-theme",value:g,children:y,nonce:v,scriptProps:w}=e,[k,j]=a.useState(()=>p(i,u)),[N,_]=a.useState(()=>"system"===k?b():k),A=g?Object.values(g):c,C=a.useCallback(e=>{let t=e;if(!t)return;"system"===e&&s&&(t=b());let a=g?g[t]:t,l=r?x(v):null,n=document.documentElement,i=e=>{"class"===e?(n.classList.remove(...A),a&&n.classList.add(a)):e.startsWith("data-")&&(a?n.setAttribute(e,a):n.removeAttribute(e))};if(Array.isArray(f)?f.forEach(i):i(f),d){let e=o.includes(u)?u:null,r=o.includes(t)?t:e;n.style.colorScheme=r}null==l||l()},[v]),S=a.useCallback(e=>{let t="function"==typeof e?e(k):e;j(t);try{localStorage.setItem(i,t)}catch(e){}},[k]),E=a.useCallback(e=>{_(b(e)),"system"===k&&s&&!t&&C("system")},[k,t]);a.useEffect(()=>{let e=window.matchMedia(l);return e.addListener(E),E(e),()=>e.removeListener(E)},[E]),a.useEffect(()=>{let e=e=>{e.key===i&&(e.newValue?j(e.newValue):S(u))};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[S]),a.useEffect(()=>{C(null!=t?t:k)},[t,k]);let M=a.useMemo(()=>({theme:k,setTheme:S,forcedTheme:t,resolvedTheme:"system"===k?N:k,themes:s?[...c,"system"]:c,systemTheme:s?N:void 0}),[k,S,t,N,s,c]);return a.createElement(n.Provider,{value:M},a.createElement(h,{forcedTheme:t,storageKey:i,attribute:f,enableSystem:s,enableColorScheme:d,defaultTheme:u,value:g,themes:c,nonce:v,scriptProps:w}),y)},h=a.memo(e=>{let{forcedTheme:t,storageKey:r,attribute:o,enableSystem:l,enableColorScheme:n,defaultTheme:d,value:i,themes:c,nonce:m,scriptProps:u}=e,h=JSON.stringify([o,r,d,t,c,i,l,n]).slice(1,-1);return a.createElement("script",{...u,suppressHydrationWarning:!0,nonce:"",dangerouslySetInnerHTML:{__html:"(".concat(s.toString(),")(").concat(h,")")}})}),p=(e,t)=>{let r;try{r=localStorage.getItem(e)||void 0}catch(e){}return r||t},x=e=>{let t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.appendChild(document.createTextNode("*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(t),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(t)},1)}},b=e=>(e||(e=window.matchMedia(l)),e.matches?"dark":"light")},13065:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var a=r(95155),s=r(12115),o=r(20063),l=r(3941),n=r(35299),d=r(61362),i=r(71847);let c=(0,i.A)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);var m=r(96044),u=r(20508),h=r(24033);let p=(0,i.A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var x=r(59744);function b(){let e=(0,o.useRouter)(),[t,r]=(0,s.useState)(null),[i,b]=(0,s.useState)(null),[f,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[w,k]=(0,s.useState)(!0),[j,N]=(0,s.useState)([]),[_,A]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null);async function E(){try{let{data:{session:t}}=await l.N.auth.getSession();if(!t)return void e.push("/");let{data:a}=await l.N.from("usuarios").select("*").eq("id",t.user.id).single();if(!a||"equipo"!==a.rol){console.error("Role mismatch or user missing",a),e.push("/");return}r(t.user),b(a.jugador_id||null);let[s,o]=await Promise.all([l.N.from("partidos").select("*").eq("estado","programado").order("fecha",{ascending:!0}).limit(1),fetch("/api/players?equipo_id=".concat("7ec6e1c6-9704-496c-ae72-a590817b9568","&t=").concat(Date.now()))]),n=s.data;if(o.ok){let e=await o.json();N(e.jugadores||[])}if(n&&n.length>0){let e=n[0];if(g(e),a.jugador_id){let{data:t}=await l.N.from("convocatorias").select("asiste").eq("partido_id",e.id).eq("jugador_id",a.jugador_id).single();t&&v(t.asiste)}}}catch(e){console.error(e)}finally{k(!1)}}(0,s.useEffect)(()=>{E()},[]);let M=async e=>{if(b(e),j.find(t=>t.id===e)&&f){let{data:t}=await l.N.from("convocatorias").select("asiste").eq("partido_id",f.id).eq("jugador_id",e).single();v(t?t.asiste:null)}},L=async e=>{if(!i||!f)return void alert("Selecciona tu nombre primero arriba \uD83D\uDC46");A(!0),v(e);try{let{error:t}=await l.N.from("convocatorias").upsert({partido_id:f.id,jugador_id:i,asiste:e},{onConflict:"partido_id, jugador_id"});if(t)throw t;S("\xa1Asistencia registrada correctamente!"),setTimeout(()=>S(null),3500)}catch(e){console.error("Error setting RSVP:",e),alert("Error al guardar asistencia. Intenta de nuevo."),v(y)}finally{A(!1)}},T=async()=>{await l.N.auth.signOut(),e.push("/")};return w?(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center",children:(0,a.jsx)(n.A,{className:"animate-spin text-primary h-8 w-8 drop-shadow-[0_0_10px_rgba(20,184,106,0.8)]"})}):(0,a.jsxs)("div",{className:"min-h-screen bg-background text-foreground pt-24 pb-12 px-4 relative",children:[C&&(0,a.jsx)("div",{className:"fixed top-24 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-top-4 duration-300",children:(0,a.jsxs)("div",{className:"bg-emerald-500 text-white px-6 py-3 rounded-full font-bold shadow-lg shadow-emerald-500/20 flex items-center gap-2 border border-emerald-400",children:[(0,a.jsx)(d.A,{className:"h-5 w-5"}),C]})}),(0,a.jsxs)("div",{className:"max-w-3xl mx-auto space-y-8",children:[(0,a.jsxs)("div",{className:"bg-card/80 backdrop-blur-xl border border-border rounded-3xl p-8 shadow-lg dark:shadow-[0_0_30px_rgba(20,184,106,0.15)] flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 transition-all duration-300",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-extrabold mb-2 drop-shadow-sm text-foreground",children:"Portal del Jugador"}),(0,a.jsx)("p",{className:"text-muted-foreground font-medium",children:"Panel de asistencia de la plantilla."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 bg-secondary/30 p-2 rounded-2xl border border-border/50",children:[(0,a.jsx)(x.c,{}),(0,a.jsxs)("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2 bg-red-500/10 hover:bg-red-500 text-red-600 dark:text-red-400 hover:text-white rounded-xl transition-all font-bold text-sm",children:[(0,a.jsx)(c,{className:"h-4 w-4"}),"Salir"]})]})]}),f?(0,a.jsxs)("div",{className:"bg-card border border-border rounded-3xl overflow-hidden shadow-xl dark:shadow-[0_0_40px_rgba(0,0,0,0.5)] transition-all duration-300",children:[(0,a.jsxs)("div",{className:"bg-primary/10 border-b border-border p-6 flex items-center justify-between relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/10 to-transparent pointer-events-none"}),(0,a.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 relative z-10 text-foreground",children:[(0,a.jsx)(m.A,{className:"h-6 w-6 text-primary drop-shadow-[0_0_8px_rgba(20,184,106,0.6)]"}),"Pr\xf3xima Convocatoria"]}),(0,a.jsx)("span",{className:"bg-primary/20 text-primary dark:text-primary-foreground dark:bg-primary border border-primary/30 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wider relative z-10 shadow-[0_0_10px_rgba(20,184,106,0.2)]",children:"Programado"})]}),(0,a.jsxs)("div",{className:"p-8 text-center space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-bold text-muted-foreground uppercase tracking-widest mb-2",children:"Jornada vs"}),(0,a.jsx)("p",{className:"text-4xl font-black",children:f.rival}),(0,a.jsxs)("p",{className:"text-muted-foreground mt-4 text-lg",children:["\uD83D\uDCC5 ",new Date(f.fecha).toLocaleDateString("es-ES",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]})]}),(0,a.jsxs)("div",{className:"pt-8 border-t border-border mt-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-muted-foreground uppercase tracking-widest mb-3 text-left max-w-md mx-auto",children:"\xbfQui\xe9n eres?"}),(0,a.jsxs)("div",{className:"relative max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)(u.A,{className:"h-5 w-5 text-muted-foreground"})}),(0,a.jsxs)("select",{className:"w-full appearance-none bg-background border border-border text-foreground py-3 pl-10 pr-10 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-all",value:i||"",onChange:e=>M(e.target.value),children:[(0,a.jsx)("option",{value:"",disabled:!0,children:"-- Selecciona tu nombre --"}),j.map(e=>(0,a.jsxs)("option",{value:e.id,children:[e.dorsal," - ",e.nombre]},e.id))]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,a.jsx)(h.A,{className:"h-5 w-5 text-muted-foreground"})})]})]}),(0,a.jsx)("h3",{className:"text-lg font-bold mb-6 text-foreground",children:"\xbfVas a asistir al partido?"}),(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto",children:[(0,a.jsxs)("button",{onClick:()=>L(!0),disabled:!i||_,className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300 ".concat(!0===y?"bg-emerald-500 text-white shadow-[0_0_20px_rgba(20,184,106,0.4)] ring-2 ring-emerald-500 ring-offset-2 ring-offset-background scale-105":"bg-secondary hover:bg-emerald-500/10 hover:text-emerald-500 border border-transparent hover:border-emerald-500/30"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(d.A,{className:"h-6 w-6"}),"Asistir\xe9"]}),(0,a.jsxs)("button",{onClick:()=>L(!1),disabled:!i||_,className:"flex-1 flex items-center justify-center gap-2 py-4 px-6 rounded-2xl font-bold text-lg transition-all duration-300 ".concat(!1===y?"bg-red-500 text-white shadow-[0_0_20px_rgba(239,68,68,0.4)] ring-2 ring-red-500 ring-offset-2 ring-offset-background scale-105":"bg-secondary hover:bg-red-500/10 hover:text-red-500 border border-transparent hover:border-red-500/30"," disabled:opacity-50 disabled:cursor-not-allowed"),children:[(0,a.jsx)(p,{className:"h-6 w-6"}),"No ir\xe9"]})]})]})]})]}):(0,a.jsxs)("div",{className:"bg-card/40 backdrop-blur-md border-2 border-border border-dashed hover:border-primary/50 transition-all duration-300 rounded-3xl p-12 text-center shadow-inner group",children:[(0,a.jsx)("span",{className:"text-6xl opacity-70 mb-6 block drop-shadow-md cursor-default group-hover:scale-110 group-hover:-rotate-3 transition-transform duration-500",children:"\uD83C\uDFDDï¸"}),(0,a.jsx)("h3",{className:"text-2xl font-bold text-foreground drop-shadow-sm",children:"No hay pr\xf3ximos partidos"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-3 text-lg font-medium",children:"El calendario est\xe1 libre por ahora. Disfruta del merecido descanso."})]})]})]})}},20508:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},24033:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},35299:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},37494:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]])},59427:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]])},59744:(e,t,r)=>{"use strict";r.d(t,{c:()=>n});var a=r(95155);r(12115);var s=r(59427),o=r(37494),l=r(5379);function n(){let{resolvedTheme:e,setTheme:t}=(0,l.D)();return(0,a.jsxs)("button",{onClick:()=>t("dark"===e?"light":"dark"),className:"relative flex items-center justify-center p-2 rounded-full bg-secondary hover:bg-muted text-foreground transition-colors overflow-hidden",title:"Alternar Modo Oscuro/Claro",children:[(0,a.jsx)(s.A,{className:"h-5 w-5 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(o.A,{className:"absolute h-5 w-5 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Cambiar tema"})]})}},61362:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},71847:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(12115);let s=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:d,className:i="",children:c,iconNode:m,...u}=e;return(0,a.createElement)("svg",{ref:t,...o,width:l,height:l,stroke:r,strokeWidth:d?24*Number(n)/Number(l):n,className:s("lucide",i),...u},[...m.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(c)?c:[c]])}),n=(e,t)=>{let r=(0,a.forwardRef)((r,o)=>{let{className:n,...d}=r;return(0,a.createElement)(l,{ref:o,iconNode:t,className:s("lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),n),...d})});return r.displayName="".concat(e),r}},96044:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(71847).A)("CalendarHeart",[["path",{d:"M3 10h18V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7",key:"136lmk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21.29 14.7a2.43 2.43 0 0 0-2.65-.52c-.3.12-.57.3-.8.53l-.34.34-.35-.34a2.43 2.43 0 0 0-2.65-.53c-.3.12-.56.3-.79.53-.95.94-1 2.53.2 3.74L17.5 22l3.6-3.55c1.2-1.21 1.14-2.8.19-3.74Z",key:"1t7hil"}]])},99848:(e,t,r)=>{Promise.resolve().then(r.bind(r,13065))}},e=>{e.O(0,[174,441,255,358],()=>e(e.s=99848)),_N_E=e.O()}]);