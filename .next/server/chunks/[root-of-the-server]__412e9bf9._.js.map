{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst serviceRole = process.env.SUPABASE_SERVICE_ROLE_KEY!;\r\n\r\nexport const supabaseAdmin = createClient(url, serviceRole, {\r\n  auth: { autoRefreshToken: false, persistSession: false },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,cAAc,QAAQ,GAAG,CAAC,yBAAyB;AAElD,MAAM,gBAAgB,IAAA,gMAAY,EAAC,KAAK,aAAa;IAC1D,MAAM;QAAE,kBAAkB;QAAO,gBAAgB;IAAM;AACzD","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/app/api/players/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { supabaseAdmin } from \"@/lib/supabase/admin\";\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const equipoId = request.nextUrl.searchParams.get(\"equipo_id\");\r\n\r\n        if (!equipoId) {\r\n            return NextResponse.json({ error: \"Falta el par치metro equipo_id\" }, { status: 400 });\r\n        }\r\n\r\n        // 1. Consulta: Traemos a los jugadores (ya contienen sus 'goles')\r\n        const { data: jugadores, error: jugadoresError } = await supabaseAdmin\r\n            .from(\"jugadores\")\r\n            .select(\"*\")\r\n            .eq(\"equipo_id\", equipoId)\r\n            .order(\"dorsal\", { ascending: true });\r\n\r\n        if (jugadoresError) {\r\n            return NextResponse.json({ error: jugadoresError.message }, { status: 500 });\r\n        }\r\n\r\n        // 2. Procesamos los datos para estructurar la respuesta\r\n        const jugadoresConGoles = jugadores?.map((jugador) => {\r\n            return {\r\n                ...jugador,\r\n                goles_totales: jugador.goles || 0, // A침adimos el nuevo campo calculado para compatibilidad\r\n            };\r\n        }) || [];\r\n\r\n        // 3. Extra (Consideraci칩n oportuna): Creamos un ranking de los m치ximos goleadores\r\n        const topGoleadores = [...jugadoresConGoles]\r\n            .sort((a, b) => b.goles_totales - a.goles_totales)\r\n            .slice(0, 15);\r\n\r\n        return NextResponse.json({\r\n            jugadores: jugadoresConGoles,\r\n            total_jugadores: jugadoresConGoles.length, // Evitamos hacer la consulta count() extra\r\n            top_goleadores: topGoleadores\r\n        });\r\n\r\n    } catch (error: any) {\r\n        return NextResponse.json({ error: error?.message || \"Error interno del servidor\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,UAAU;AAEhB,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,WAAW,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;QAElD,IAAI,CAAC,UAAU;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA+B,GAAG;gBAAE,QAAQ;YAAI;QACtF;QAEA,kEAAkE;QAClE,MAAM,EAAE,MAAM,SAAS,EAAE,OAAO,cAAc,EAAE,GAAG,MAAM,2IAAa,CACjE,IAAI,CAAC,aACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC,UAAU;YAAE,WAAW;QAAK;QAEvC,IAAI,gBAAgB;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,eAAe,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,wDAAwD;QACxD,MAAM,oBAAoB,WAAW,IAAI,CAAC;YACtC,OAAO;gBACH,GAAG,OAAO;gBACV,eAAe,QAAQ,KAAK,IAAI;YACpC;QACJ,MAAM,EAAE;QAER,kFAAkF;QAClF,MAAM,gBAAgB;eAAI;SAAkB,CACvC,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,aAAa,GAAG,EAAE,aAAa,EAChD,KAAK,CAAC,GAAG;QAEd,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,WAAW;YACX,iBAAiB,kBAAkB,MAAM;YACzC,gBAAgB;QACpB;IAEJ,EAAE,OAAO,OAAY;QACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,OAAO,WAAW;QAA6B,GAAG;YAAE,QAAQ;QAAI;IACtG;AACJ","debugId":null}}]
}