{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst serviceRole = process.env.SUPABASE_SERVICE_ROLE_KEY!;\r\n\r\nexport const supabaseAdmin = createClient(url, serviceRole, {\r\n  auth: { autoRefreshToken: false, persistSession: false },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,cAAc,QAAQ,GAAG,CAAC,yBAAyB;AAElD,MAAM,gBAAgB,IAAA,gMAAY,EAAC,KAAK,aAAa;IAC1D,MAAM;QAAE,kBAAkB;QAAO,gBAAgB;IAAM;AACzD","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/app/api/matches/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { supabaseAdmin } from \"@/lib/supabase/admin\";\r\n\r\n\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const equipoId = request.nextUrl.searchParams.get(\"equipo_id\");\r\n        if (!equipoId) {\r\n            return NextResponse.json({ error: \"Missing equipo_id\" }, { status: 400 });\r\n        }\r\n\r\n        // Partidos de ese equipo (todos los formatos)\r\n        const { data: partidos, error: partidosError } = await supabaseAdmin\r\n            .from(\"partidos\")\r\n            .select(\"*\")\r\n            .eq(\"equipo_id\", equipoId)\r\n            .order(\"fecha\", { ascending: true });\r\n\r\n        if (partidosError) {\r\n            return NextResponse.json({ error: partidosError.message }, { status: 500 });\r\n        }\r\n\r\n        const partidoIds = (partidos ?? []).map((p: any) => p.id);\r\n\r\n        // Goleadores (con nombre del jugador via relaciÃ³n FK)\r\n        let goleadoresFlat: any[] = [];\r\n        if (partidoIds.length > 0) {\r\n            const { data: goleadores, error: goleadoresError } = await supabaseAdmin\r\n                .from(\"goleadores_partido\")\r\n                .select(\"id, partido_id, jugador_id, goles, jugadores(nombre)\")\r\n                .in(\"partido_id\", partidoIds);\r\n\r\n            if (goleadoresError) {\r\n                return NextResponse.json({ error: goleadoresError.message }, { status: 500 });\r\n            }\r\n\r\n            goleadoresFlat = (goleadores ?? []).map((g: any) => ({\r\n                id: g.id,\r\n                partido_id: g.partido_id,\r\n                jugador_id: g.jugador_id,\r\n                goles: g.goles,\r\n                nombre: g.jugadores?.nombre ?? \"\",\r\n            }));\r\n        }\r\n\r\n        return NextResponse.json({\r\n            partidos: partidos ?? [],\r\n            goleadores: goleadoresFlat,\r\n        });\r\n    } catch (e: any) {\r\n        return NextResponse.json({ error: e?.message ?? \"Error interno\" }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAIO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,WAAW,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;QAClD,IAAI,CAAC,UAAU;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAoB,GAAG;gBAAE,QAAQ;YAAI;QAC3E;QAEA,8CAA8C;QAC9C,MAAM,EAAE,MAAM,QAAQ,EAAE,OAAO,aAAa,EAAE,GAAG,MAAM,2IAAa,CAC/D,IAAI,CAAC,YACL,MAAM,CAAC,KACP,EAAE,CAAC,aAAa,UAChB,KAAK,CAAC,SAAS;YAAE,WAAW;QAAK;QAEtC,IAAI,eAAe;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,cAAc,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,aAAa,CAAC,YAAY,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,EAAE,EAAE;QAExD,sDAAsD;QACtD,IAAI,iBAAwB,EAAE;QAC9B,IAAI,WAAW,MAAM,GAAG,GAAG;YACvB,MAAM,EAAE,MAAM,UAAU,EAAE,OAAO,eAAe,EAAE,GAAG,MAAM,2IAAa,CACnE,IAAI,CAAC,sBACL,MAAM,CAAC,wDACP,EAAE,CAAC,cAAc;YAEtB,IAAI,iBAAiB;gBACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;oBAAE,OAAO,gBAAgB,OAAO;gBAAC,GAAG;oBAAE,QAAQ;gBAAI;YAC/E;YAEA,iBAAiB,CAAC,cAAc,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;oBACjD,IAAI,EAAE,EAAE;oBACR,YAAY,EAAE,UAAU;oBACxB,YAAY,EAAE,UAAU;oBACxB,OAAO,EAAE,KAAK;oBACd,QAAQ,EAAE,SAAS,EAAE,UAAU;gBACnC,CAAC;QACL;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,UAAU,YAAY,EAAE;YACxB,YAAY;QAChB;IACJ,EAAE,OAAO,GAAQ;QACb,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,GAAG,WAAW;QAAgB,GAAG;YAAE,QAAQ;QAAI;IACrF;AACJ","debugId":null}}]
}