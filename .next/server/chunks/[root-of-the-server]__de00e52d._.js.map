{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/lib/supabase/admin.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst url = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst serviceRole = process.env.SUPABASE_SERVICE_ROLE_KEY!;\r\n\r\nexport const supabaseAdmin = createClient(url, serviceRole, {\r\n  auth: { autoRefreshToken: false, persistSession: false },\r\n});\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM,cAAc,QAAQ,GAAG,CAAC,yBAAyB;AAElD,MAAM,gBAAgB,IAAA,gMAAY,EAAC,KAAK,aAAa;IAC1D,MAAM;QAAE,kBAAkB;QAAO,gBAAgB;IAAM;AACzD","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mario/PycharmProjects/futbol7/app/api/players/avatar/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { supabaseAdmin } from \"@/lib/supabase/admin\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const body = await req.json();\r\n        const { jugador_id, foto_url } = body;\r\n\r\n        if (!jugador_id || !foto_url) {\r\n            return NextResponse.json(\r\n                { error: \"Faltan parámetros requeridos: jugador_id o foto_url\" },\r\n                { status: 400 }\r\n            );\r\n        }\r\n\r\n        // En un entorno de producción estricto, aquí verificaríamos la sesión del usuario para ver si tiene permisos\r\n        // const authHeader = req.headers.get(\"Authorization\"); etc...\r\n\r\n        const { data, error } = await supabaseAdmin\r\n            .from(\"jugadores\")\r\n            .update({ foto_url: foto_url })\r\n            .eq(\"id\", jugador_id)\r\n            .select();\r\n\r\n        if (error) {\r\n            console.error(\"Error updating avatar in DB:\", error);\r\n            return NextResponse.json({ error: error.message }, { status: 500 });\r\n        }\r\n\r\n        return NextResponse.json({ success: true, jugador: data[0] }, { status: 200 });\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Avatar Update Error:\", error);\r\n        return NextResponse.json(\r\n            { error: error?.message || \"Internal server error\" },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,eAAe,KAAK,GAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG;QAEjC,IAAI,CAAC,cAAc,CAAC,UAAU;YAC1B,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,OAAO;YAAsD,GAC/D;gBAAE,QAAQ;YAAI;QAEtB;QAEA,6GAA6G;QAC7G,8DAA8D;QAE9D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,2IAAa,CACtC,IAAI,CAAC,aACL,MAAM,CAAC;YAAE,UAAU;QAAS,GAC5B,EAAE,CAAC,MAAM,YACT,MAAM;QAEX,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,gCAAgC;YAC9C,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO,MAAM,OAAO;YAAC,GAAG;gBAAE,QAAQ;YAAI;QACrE;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS,IAAI,CAAC,EAAE;QAAC,GAAG;YAAE,QAAQ;QAAI;IAEhF,EAAE,OAAO,OAAY;QACjB,QAAQ,KAAK,CAAC,wBAAwB;QACtC,OAAO,gJAAY,CAAC,IAAI,CACpB;YAAE,OAAO,OAAO,WAAW;QAAwB,GACnD;YAAE,QAAQ;QAAI;IAEtB;AACJ","debugId":null}}]
}